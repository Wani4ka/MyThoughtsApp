# MyThoughtsApp
Мое решение тестового задания для ВКонтакте в команду контентной платформы.

## Зависимости
### [NodeJS](https://nodejs.org/)
Программная платформа, обеспечивающая запуск JavaScript-приложений. В сравнении с другими вариантами (PHP, Java, Python, ...) создает впечатление простой и очень хорошо поддерживаемой платформы, как ее разработчиками, так и сообществом. При разработке использовалась версия 16.14.2.

### npm
Менеджер зависимостей для NodeJS. Приложение использует несколько сторонних библиотек, установку и работу которых обеспечивает эта утилита. Устанавливается вместе с NodeJS. При разработке использовалась версия 8.3.1.

### MySQL
База данных, используемая для хранения информации о пользователях, постах и сессиях. Лично мне предпочтительнее работать именно с "табличными" базами данных, из-за интуитивно понятного синтаксиса запросов, стремящегося к естественному английскому языку. В частности, при разработке и на продакшене используется дистрибутив [MariaDB](https://mariadb.org/) версии 10.3.34. Согласно сравнениям в Интернете, MariaDB имеет свой механизм хранения, благодаря которому на SSD дисках наблюдается более высокая производительность работы.

## Установка
1. Скачать исходный код репозитория [по ссылке](https://github.com/Wani4ka/MyThoughtsApp/archive/refs/heads/main.zip) или с помощью команды:
```
git clone https://github.com/Wani4ka/MyThoughtsApp.git
```

2. В папке репозитория выполнить команды:
```
npm install
npm run client:install
```
Эти команды установят библиотеки, необходимые как серверной, так и клиентской части приложения.

3. Создать новый файл `config.ts`, скопировать в него содержание файла `config.example.ts`:
```
cp config.example.ts config.ts
```
Настроить его согласно разделу [config.ts](#).

4. Создать необходимые таблицы в базе данных с помощью команды:
```
npm run db:push
```

5. Собрать оптимизированный билд клиентской части кода с помощью команды:
```
npm run client:build
```

6. Запустить сервер с помощью команды:
```
npmt run start
```

### config.ts
Пример конфига:
```ts
import Config from './declarations/config'

const config: Config = {
    port: 5000,
    db: {
        host: 'localhost',
        port: 3306,
        user: 'root',
        pass: '',
        name: 'mythoughts'
    },
    pageSize: 20,
    usernameFormat: /^[a-z0-9_]{3,}$/,
    sessionSecret: 'SessionSecretRequiredByExpressSession :)',
    invite: 'spb2022',
}

export default config
```

Ниже приведено подробное описание каждого пункта в конфиге.

#### port
**Тип**: число
**Описание**: Порт, который займет приложение. Если указать `80`, то при подключении к сайту порт указывать будет необязательно.

#### db
Настройки MySQL-сервера

##### host
**Тип**: строка
**Описание**: IP-адрес, к которому будет подключаться приложение

##### db.port
**Тип**: число
**Описание**: Порт, к которому будет подключаться приложение

##### db.user
**Тип**: строка
**Описание**: Имя пользователя, от имени которого будет подключаться приложение

##### db.pass
**Тип**: строка
**Описание**: Пароль пользователя, от имени которого будет подключаться приложение. Если оставить пустым, то подключение будет осуществляться без пароля

##### db.name
**Тип**: строка
**Описание**: Название базы данных, в которой приложение будет создавать нужные ему таблицы

#### pageSize
**Тип**: число
**Описание**: Количество мыслей на одной странице

#### usernameFormat
**Тип**: RegEx
**Описание**: Выражение, которое проверяет корректность имени пользователя. ⚠️ Это значение не синхронизируется с клиентским! На клиенте нужно самостоятельно изменять его в файле [client/src/components/login/UsernameComponent.js](https://github.com/Wani4ka/MyThoughtsApp/blob/main/client/src/components/login/UsernameComponent.js), после этого выполняя `npm run client:build`

#### sessionSecret
**Тип**: Строка
**Описание**: Секретный ключ, которым будут подписываться сессии пользователей

#### invite
**Тип**: Строка
**Описание**: Инвайт-код, который обязательно нужно ввести при регистрации. Своего рода парольное слово, чтобы на данном этапе в приложении не могли зарегистрироваться все подряд
